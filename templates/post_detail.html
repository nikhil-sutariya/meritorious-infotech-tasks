{% extends "base.html" %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<div>
    <h4>{{ post.title }}</h4>
    <p class="fs-6 mt-3">Written by - {{ post.author.username }}</p>
    <p class="post-content">{{ post.content }}</p>

    
    {% if user.is_authenticated %}
        <p class="mt-5">Comments: </p>
        <div class="my-4">
            <form class="comment-form" method="post" action="{% url 'add_comment' post.id %}">
                {% csrf_token %}
                <label for="comment" class="form-label">
                    Add comment: 
                </label>
                <input type="text" placeholder="Add comment" class="w-25" name="content" id="comment">
                <button class="btn btn-success" type="submit">Submit</button>
            </form>
        </div>
        <br>
    {% endif %}

    {% for comment in comments %}
        <div class='my-4'>
            <div class="d-flex">
                <p class="comment-header">#{{ forloop.counter }} - {{ comment.author.username }}</p>
                <span class="post-date mt-1 ms-auto"> {{ comment.created_at }} </span> 
            </div>
            <p class="comment-header">Comment: {{ comment.content }}</p>
        </div>
        <hr>
    {% endfor %}
</div>

{% endblock %}
